
R version 3.3.1 (2016-06-21) -- "Bug in Your Hair"
Copyright (C) 2016 The R Foundation for Statistical Computing
Platform: x86_64-apple-darwin13.4.0 (64-bit)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type 'license()' or 'licence()' for distribution details.

  Natural language support but running in an English locale

R is a collaborative project with many contributors.
Type 'contributors()' for more information and
'citation()' on how to cite R or R packages in publications.

Type 'demo()' for some demos, 'help()' for on-line help, or
'help.start()' for an HTML browser interface to help.
Type 'q()' to quit R.

> source ("estimates.r")
> 
> counties <- read.csv("data/counties.csv", na = "-99", as.is = T)
> 
> ## a) 
> 
> hist (counties$physician)
> 
> ## b) Simple estimate
> 
> N <- 3141
> srs_est (counties$physician, N = 3141) * N
      Est.       S.E.     ci.low     ci.upp 
 933410.97  491982.79  -42789.62 1909611.56 
> 
> ## c) 
> 
> plot (counties$totpop, counties$physician)
> # for a better view, we can use log
> plot (counties$totpop, counties$physician, log = "xy")
> 
> ## omit those counties with more than 1000 physicians
> small_counties <- which (counties$physician < 1000)
> plot (counties$totpop[small_counties], counties$physician[small_counties])
> # for a better view, use log
> plot (counties$totpop[small_counties], counties$physician[small_counties], log = "xy")
> 
> 
> ## regression estimate may be more appropriate, since when number of physicians is nearly 0 (1 is the smallest number), the number of total population is far from 0. 
> 
> ## d)
> 
> ## if we use ratio estimation:
> srs_ratio_est (counties$physician, counties$totpop, N = N) * 255077536
     Est.      S.E.    ci.low    ci.upp 
639506.03  87885.27 465122.60 813889.46 
> 
> ## if we use regression estimation:
> srs_reg_est (counties$physician, counties$totpop, 255077536/N, N = N) * N
    Est.     S.E.   ci.low   ci.upp 
585870.6 105177.4 377149.4 794591.8 
> 
> ## e)
> 
> ## ratio and regression estimates are closer to the true value. The reason is that numbers of physicians vary greatly in different counties due to the population size. 
> 
