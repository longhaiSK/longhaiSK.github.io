/*-- scss:rules --*/

/* 1. Define the Color Palette */
$themes: (
  "theorem":    (bg: #f0f7ff, border: #cfe2ff, header-bg: #cfe2ff, text: #084298),
  "corollary":  (bg: #f0f7ff, border: #cfe2ff, header-bg: #cfe2ff, text: #084298),
  "proposition":(bg: #f0f7ff, border: #cfe2ff, header-bg: #cfe2ff, text: #084298),
  "algorithm":  (bg: #f0f7ff, border: #cfe2ff, header-bg: #cfe2ff, text: #084298),
  "definition": (bg: #f0fff4, border: #badbcc, header-bg: #badbcc, text: #0f5132),
  "example":    (bg: #fffbf0, border: #ffeebb, header-bg: #ffeebb, text: #664d03),
  "proof":      (bg: #e2e3e5, border: #e2e3e5, header-bg: #a6a4a4, text: #41464b),
  "sol":        (bg: #f9f2f4, border: #d9534f, header-bg: #d9534f, text: #ffffff),
  "solution":   (bg: #f9f2f4, border: #d9534f, header-bg: #d9534f, text: #ffffff)
);

/* 2. Create a "Mixin" (The styling recipe) */
@mixin title-bar-style {
  display: block;
  font-weight: bold;
  font-size: 1em;
  margin: -1em -1em 1em -1em; /* Stretches bar to the edges */
  padding: 0.6em 1em;
  border-bottom: 1px solid rgba(0,0,0,0.05);
}

/* 3. Base Container Styling */
div.theorem, div.definition, div.example, div.proof, div.sol, div.solution,
div.corollary, div.proposition, div.algorithm {
  padding: 1em; 
  margin-bottom: 2em;
  border: 2px solid; 
  border-radius: 5px;
  overflow: hidden; 
  box-shadow: 0 2px 4px rgba(0,0,0,0.05);
  
  > p:first-child { margin-top: 0; }
}

/* 4. Apply Colors and Header Logic */
@each $name, $colors in $themes {
  div.#{$name} {
    background-color: map-get($colors, "bg");
    border-color:     map-get($colors, "border");

    /* CASE A: Standard Quarto Titles (Numbered Theorems, etc.) */
    span.theorem-title, 
    span.proof-title {
      @include title-bar-style; 
      background-color: map-get($colors, "header-bg");
      color:            map-get($colors, "text");
    }

    /* CASE B: Static "Solution" Title */
    @if $name == "sol" or $name == "solution" {
      &::before {
        content: "Solution"; 
        @include title-bar-style; 
        background-color: map-get($colors, "header-bg");
        color:            map-get($colors, "text");
      }
    }

    /* CASE C: Static "Algorithm" Title (NEW) */
    @if $name == "algorithm" {
      &::before {
        content: "Algorithm"; 
        @include title-bar-style; 
        background-color: map-get($colors, "header-bg");
        color:            map-get($colors, "text");
      }
    }
  }
}