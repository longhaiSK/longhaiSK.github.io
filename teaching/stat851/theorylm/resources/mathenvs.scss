/*-- scss:rules --*/

/* 1. Define the Color Palette */
/* I added your 'Solution' colors (Red/Pink) to this list */
$themes: (
  "theorem":    (bg: #f0f7ff, border: #cfe2ff, header-bg: #cfe2ff, text: #084298),
  "definition": (bg: #f0fff4, border: #badbcc, header-bg: #badbcc, text: #0f5132),
  "example":    (bg: #fffbf0, border: #ffeebb, header-bg: #ffeebb, text: #664d03),
  "proof":      (bg: #e2e3e5, border: #e2e3e5, header-bg: #a6a4a4, text: #41464b),
  "sol":        (bg: #f9f2f4, border: #d9534f, header-bg: #d9534f, text: #ffffff) 
);

/* 2. Create a "Mixin" (A reusable styling recipe) */
/* This contains the logic that makes the bar look good */
@mixin title-bar-style {
  display: block;
  font-weight: bold;
  
  /* The Magic Negative Margins */
  margin: -1em -1em 1em -1em;
  
  /* Padding INSIDE the colored bar */
  padding: 0.6em 1em;
  
  /* Border to separate header from body */
  border-bottom: 1px solid rgba(0,0,0,0.05);
}

/* 3. Base Container Styling */
div.theorem, div.definition, div.example, div.proof, div.sol {
  padding: 1em; /* Gives breathing room to the body text */
  margin-bottom: 2em;
  border: 2px solid; /* Matches your 'sol' thickness */
  border-radius: 5px;
  overflow: hidden; /* Clips the header corners */
  box-shadow: 0 2px 4px rgba(0,0,0,0.05);
  
  /* Remove top margin from the first paragraph so it sits snug under the bar */
  > p:first-child {
    margin-top: 0;
  }
}

/* 4. Apply Colors and Header Logic */
@each $name, $colors in $themes {
  div.#{$name} {
    background-color: map-get($colors, "bg");
    border-color:     map-get($colors, "border");

    /* CASE A: Dynamic Titles (Theorems, Definitions) */
    /* Quarto puts these in a span, so we style the span */
    span.theorem-title, 
    span.proof-title {
      @include title-bar-style; /* Apply the recipe */
      background-color: map-get($colors, "header-bg");
      color:            map-get($colors, "text");
    }

    /* CASE B: Static Titles (Solutions) */
    /* If the class is 'sol', we use ::before to auto-generate the text */
    @if $name == "sol" {
      &::before {
        content: "Solution"; /* Force the text */
        @include title-bar-style; /* Apply the same recipe */
        background-color: map-get($colors, "header-bg");
        color:            map-get($colors, "text");
      }
    }
  }
}
